!function(t){var i=document.getElementById("msgPanelBody"),e=document.getElementById("inputFld"),n=document.getElementById("sendButton"),s='<div class="row alert"> \t\t\t        <div class="msg alert"> \t\t\t            <p><i class="fa fa-lightbulb-o"></i> {msg}</p> \t\t\t        </div>\t\t\t    </div>',o='<div class="row they">\t\t\t\t\t<div class="msg they">\t\t\t\t\t\t<p><strong>Stranger:</strong></p>\t\t\t\t\t\t<div>{msg}</div>\t\t\t\t\t</div>\t\t\t\t</div>',d='<div class="row me">\t\t    <div class="msg me">\t\t        <p><strong>Me:</strong></p>\t\t        <div>{msg}</div>\t\t    </div>\t\t</div>',l=16,c=13,a=10,r={flags:{holding:{shift:!1}},render:{message:function(t,e){if(t&&e){-1!=e.indexOf("\n")?e="<p>"+(e=e.split("\n")).join("</p><p>")+"</p>":(console.log("Tem \n"),e="<p>"+e+"</p>");var n=t.replace("{msg}",e),s=$(n);$(i).append(s)}},msg:{me:function(t){r.render.message(d,t)},they:function(t){r.render.message(o,t)},alert:function(t){r.render.message(s,t)}}},scroll:{top:function(){i.scrollTop=0},bottom:function(){i.scrollTop=i.scrollHeight}},socket:{send:function(t){console.warn("Send this through socket. ",t,"Must be implemented!")},receive:function(){}},onKeyUp:function(t){if(t.which==l&&(r.flags.holding.shift=!1),(t.which==c||t.which==a)&&!r.flags.holding.shift)return t.preventDefault(),void r.sendMessage()},onKeyDown:function(t){t.which==l&&(r.flags.holding.shift=!0)},sendMessage:function(){var t=e.value;e.value="",r.scroll.bottom(),r.render.msg.me(t),r.socket.send(t)},sendButtonClicked:function(){r.sendMessage()},initialize:function(){console.log("Initializing."),e.addEventListener("keydown",r.onKeyDown),e.addEventListener("keyup",r.onKeyUp),n.addEventListener("click",r.sendButtonClicked)}};r.initialize(),t.expose={Chat:r}}(window);